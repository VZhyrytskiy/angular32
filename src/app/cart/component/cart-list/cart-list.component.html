<div class="container">
  <h3>Shopping cart:</h3>
  <div>
    <div *ngIf="productsInTheCart.length > 0; else showEmpty">
      <table class="table">
        <thead>
        <tr>
          <th>#</th>
          <th>Item</th>
          <th>Quantity</th>
          <th>Price</th>
          <th>Sum</th>
        </tr>
        </thead>
        <tbody>

        <ng-container *ngFor="let productInTheCart of productsInTheCart; let i = index">

          <tr (mouseenter)="onMouseEnter(i)" (mouseleave)="onMouseLeave()" [appHighlight]="color">
            <td>{{i + 1}}</td>
            <td>{{productInTheCart.item.name}}</td>
            <td>{{productInTheCart.quantity}}</td>
            <td>{{productInTheCart.item.price | currency}}</td>
            <td>{{productInTheCart.item.price * productInTheCart.quantity | currency}}</td>
            <td>
              <div *ngIf="currentRowIndex === i">
                <app-cart-item
                  (addOneItem)="onAddOneItem($event)"
                  (removeAllItems)="onRemoveAllItems($event)"
                  (removeOneItem)="onRemoveOneItem($event)"
                  [productInTheCart]="productInTheCart">
                </app-cart-item>
              </div>
            </td>
          </tr>
        </ng-container>


        <tr class="fw-bold">
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td>Total: {{retrieveTotal() | currency}}</td>
          <td></td>
        </tr>
        </tbody>
      </table>

      <div>
        <button (click)="checkOut()" class="btn btn-primary">Checkout</button>
      </div>

    </div>
    <ng-template #showEmpty>
      <p class="fw-lighter fst-italic">The shopping cart is empty</p>
    </ng-template>
  </div>
</div>
